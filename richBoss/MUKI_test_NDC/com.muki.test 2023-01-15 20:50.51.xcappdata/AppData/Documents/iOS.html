<!DOCTYPE html>
<html lang="zh-Hant-TW">
<head>
    <title>YEN | 視力訓練</title>
    <!-- 常見此寫法 -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <!-- JavaScript -->
    <script type="text/javascript" src="/common/js/sweetalert2@10.js"></script>
    <script type="text/javascript" src="/common/js/jquery-3.5.1.min.js"></script>
    <script type="text/javascript" src="/common/js/SMethods.js"></script>
    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="/common/css/page-common.css">
    <link rel="stylesheet" type="text/css" href="/common/css/tailwind.min.css">
    <style>
    </style>
    <!-- When no JavaScript -->
    <noscript>
        <div class="noscriptmsg">
            請啟用JS功能
        </div>
    </noscript>

    <script>
        window.onerror = function (msg, url, lineNo, columnNo, error) {
            GetEID("pLog").innerText = msg.toString();
            return false;
        }

        function sendMsg() {
            let Msg = GetEID("inMsg").value;
            window.webkit.messageHandlers.Test.postMessage(Msg);
        }

        async function getAppInfo() {
            let appInfo = await CallAppFuncCB("getAppInfo");
            GetEID("pLog").innerText = appInfo.toString();
        }

        function JSFuncHandler(Func, Value) {
            if (Func === "BTMsgReceive") {
                BTMsgReceiveHandler(Value);
            }
        }

        function BTMsgReceiveHandler(Value) {
            GetEID("pLog").innerText = Value;
            let JOB = GetJOB(Value);
            let Cmd = JOBStrGet(JOB, "Cmd");
            let Res = JOBStrGet(JOB, "Res");
            // let Msg = JOBStrGet(JOB, "Msg");
            let MsgJOB = JOBStrGetInit(JOB, "MsgJOB", {});
            if (Cmd === "Get_RealTimeInfo") {
                Get_RealTimeInfo_MP(Res, MsgJOB).then();
            } else if (Cmd === "Get_ShutdownAlert") {//準備關機提示
                Get_ShutdownAlert_MP();
            }
        }
    </script>
</head>
<body class="w-screen h-screen" style="position: relative;">
<div class="flex flex-col p-2 items-center w-full">
    <label class="my-1 w-full">
        <input id="inMsg" class="p-2  w-full border border-gray-700 rounded-lg" type="text">
    </label>
    <button class="px-4 py-2 my-1 text-xl bg-blue-500 rounded-lg text-white" onclick="sendMsg()">發送</button>
    <button class="px-4 py-2 my-1 text-xl bg-blue-500 rounded-lg text-white" onclick="getAppInfo()">getAppInfo</button>
    <p id="pLog" class="my-2 text-base text-gray-900"></p>
</div>

</body>
</html>
