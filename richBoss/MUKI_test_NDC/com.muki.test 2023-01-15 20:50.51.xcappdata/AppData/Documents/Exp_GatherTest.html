<!DOCTYPE html>
<html lang="zh-Hant-TW">
<head>
    <title>YEN | 聚散能力檢測</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=3.0, user-scalable=1">

    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="/common/css/tailwind.min.css">
    <link rel="stylesheet" type="text/css" href="/common/css/page-common.css">
    <link rel="stylesheet" type="text/css" href="/common/css/line-arrow.css">
    <!-- JS -->
    <script type="text/javascript" src="/common/js/jquery-3.5.1.min.js"></script>
    <script type="text/javascript" src="/common/js/sweetalert2@10.js"></script>
    <script type="text/javascript" src="/common/js/SMethods.js"></script>
    <script type="text/javascript" src="/common/js/localforage.min.js"></script>
    <script type="text/javascript" src="/common/js/pages/TrainingMode.js"></script>
    <script type="text/javascript" src="/common/js/pages/Exp_VisionCommon.js"></script>
    <script type="text/javascript" src="/app/js/Exp_GatherTest.js"></script>
    <style>
        option {
            text-indent: 5px;
        }

        .divOptotype {
            min-height: 35mm;
        }

        .divBOTest {
            background: #ff9966; /* fallback for old browsers */
            background: -webkit-linear-gradient(to right, #ff5e62, #ff9966); /* Chrome 10-25, Safari 5.1-6 */
            background: linear-gradient(to right, #ff5e62, #ff9966); /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */
        }

        .divBITest {
            background-color: #21D4FD;
            background-image: linear-gradient(19deg, #21D4FD 0%, #B721FF 100%);
        }

        .divRecord {
            background-image: linear-gradient(to right, #EB3349 0%, #F45C43 51%, #EB3349 100%);
            margin: 10px;
            padding: 15px 45px;
            text-align: center;
            text-transform: uppercase;
            transition: 0.5s;
            background-size: 200% auto;
            display: block;
            animation-name: kfRecord;
            animation-duration: 3s;
            animation-delay: 1s;
            animation-direction: alternate;
            animation-iteration-count: infinite;
        }

        @keyframes kfRecord {
            from {
            }
            to {
                background-position: right center; /* change the direction of the change here */
                color: #fff;
                text-decoration: none;
            }
        }

        .imgEyeGT {
            min-width: 50px;
            max-height: 120px;
            min-height: 120px;
        }

    </style>
    <!-- When no JavaScript -->
    <noscript>
        <div class="noscriptmsg">
            請開啟JavaScript瀏覽
        </div>
    </noscript>
</head>
<body class="HunInn flex flex-col flex-shrink-0 w-full h-screen bg-gray-700" style="display: none;">
<!--Step0 最後歷史紀錄-->
<div id="divNormal" class="flex flex-col items-center w-full">
    <!-- 歷史紀錄 BO -->
    <div class="flex flex-col p-2 w-full items-center justify-center text-center" style="min-height: 30vh;">
        <p class="divBOTest py-2 my-2 w-full text-white text-2xl tracking-widest rounded-lg">歷史紀錄(BO)</p>
        <div class="flex flex-row items-center w-full my-2" style="min-height: 50px;">
            <div class="flex flex-col flex-1 items-center">
                <p class="text-xl text-white py-2">模糊點</p>
                <p class="text-2xl text-gray-200 py-2" id="pBlurBO">0</p>
            </div>
            <div class="flex flex-col flex-1 items-center">
                <p class="text-xl text-white py-2">破裂點</p>
                <p class="text-2xl text-gray-200 py-2" id="pBreakBO">0</p>
            </div>
            <div class="flex flex-col flex-1 items-center">
                <p class="text-xl text-white py-2">恢復點</p>
                <p class="text-2xl text-gray-200 py-2" id="pRecoverBO">0</p>
            </div>
        </div>
    </div>
    <!-- 分割線 -->
    <div class="w-full bg-gray-500" style="min-height: 1px;"></div>
    <!-- 歷史紀錄 BI -->
    <div class="flex flex-col p-2 w-full items-center justify-center text-center" style="min-height: 30vh;">
        <p class="divBITest py-2 my-2 w-full text-white text-2xl tracking-widest rounded-lg">歷史紀錄(BI)</p>
        <div class="flex flex-row items-center w-full my-2" style="min-height: 50px;">
            <div class="flex flex-col flex-1 items-center">
                <p class="text-xl text-white py-2">模糊點</p>
                <p class="text-2xl text-gray-200 py-2" id="pBlurBI">0</p>
            </div>
            <div class="flex flex-col flex-1 items-center">
                <p class="text-xl text-white py-2">破裂點</p>
                <p class="text-2xl text-gray-200 py-2" id="pBreakBI">0</p>
            </div>
            <div class="flex flex-col flex-1 items-center">
                <p class="text-xl text-white py-2">恢復點</p>
                <p class="text-2xl text-gray-200 py-2" id="pRecoverBI">0</p>
            </div>
        </div>
    </div>
    <!-- 分割線 -->
    <div class="w-full bg-gray-500" style="min-height: 1px;"></div>
    <!-- 開始新的檢測 -->
    <div class="flex flex-col items-center w-full">
        <button class="divRecord w-2/3 mt-8 text-xl text-white text-center tracking-widest rounded-lg min-w-max"
                onclick="GoStepHandler(1)">
            開始新的檢測
        </button>
    </div>
</div>
<!--Step 1 選擇視標 & 選擇測試模式 BI BO -->
<div id="divStep1" class="flex flex-col py-2 items-center w-full">
    <p class="my-2 w-full text-center text-white text-xl tracking-widest">請選擇最小能看清楚的視標</p>
    <div class="flex flex-row flex-wrap items-center w-full">
        <div class="divOptotype w-1/2 p-2">
            <div id="divOptotype"
                 class="divOptotype w-full h-full flex flex-col items-center justify-center bg-white rounded-lg border-yellow-400"
                 onclick="optotypeSelectHandler(this,1)">
                <img class="" src="/app/image/GatherTest/ic_vision_e.png" alt="area"
                     style="max-height: 30mm">
            </div>
        </div>
        <div class="divOptotype w-1/2 p-2">
            <div class="divOptotype w-full h-full flex flex-col items-center justify-center bg-white rounded-lg border-yellow-400"
                 onclick="optotypeSelectHandler(this,2)">
                <img class="" src="/app/image/GatherTest/ic_vision_e.png" alt="area"
                     style="max-height: 25mm">
            </div>
        </div>
        <div class="divOptotype w-1/2 p-2">
            <div class="divOptotype w-full h-full flex flex-col items-center justify-center bg-white rounded-lg border-yellow-400"
                 onclick="optotypeSelectHandler(this,3)">
                <img class="" src="/app/image/GatherTest/ic_vision_e.png" alt="area"
                     style="max-height: 20mm">
            </div>
        </div>
        <div class="divOptotype w-1/2 p-2">
            <div class="divOptotype w-full h-full flex flex-col items-center justify-center bg-white rounded-lg border-yellow-400"
                 onclick="optotypeSelectHandler(this,4)">
                <img class="" src="/app/image/GatherTest/ic_vision_e.png" alt="area"
                     style="max-height: 15mm">
            </div>
        </div>
        <div class="divOptotype w-1/2 p-2">
            <div class="divOptotype w-full h-full flex flex-col items-center justify-center bg-white rounded-lg border-yellow-400"
                 onclick="optotypeSelectHandler(this,5)">
                <img class="" src="/app/image/GatherTest/ic_vision_e.png" alt="area"
                     style="max-height: 10mm">
            </div>
        </div>
        <div class="divOptotype w-1/2 p-2">
            <div class="divOptotype w-full h-full flex flex-col items-center justify-center bg-white rounded-lg border-yellow-400"
                 onclick="optotypeSelectHandler(this,6)">
                <img class="" src="/app/image/GatherTest/ic_vision_e.png" alt="area"
                     style="max-height: 5mm">
            </div>
        </div>
    </div>
    <!-- 分割線 -->
    <div class="w-full bg-gray-500 my-4" style="min-height: 1px;"></div>
    <!-- 選擇測試模式 BI BO-->
    <p class="my-2 w-full text-center text-white text-xl tracking-widest">選擇要進行的檢測</p>
    <div class="flex flex-row items-center my-4 w-full">
        <button class="divBOTest flex-1 mx-2 text-xl text-white tracking-widest rounded-lg"
                style="min-height: 100px;"
                onclick="GoStepHandler(2,'BO')">開始BO檢測
        </button>
        <button class="divBITest flex-1 mx-2 text-xl text-white tracking-widest rounded-lg"
                style="min-height: 100px;"
                onclick="GoStepHandler(2,'BI')">開始BI檢測
        </button>
    </div>
</div>


<!--Step 2 檢測中畫面 紀錄按紐-->
<div id="divStep2" class="flex flex-col items-center w-full">
    <!-- 眼睛圖 -->
    <div class="flex flex-row w-full items-center justify-center">
        <div class="flex-1" style="position: relative; ">
            <img class="imgEyeGT px-1 my-2 w-full object-contain" alt="app.image" src="/common/image/ic_eye.png"
                 style="-webkit-transform: scaleX(-1);transform: scaleX(-1);"/>
            <div id="divArrow_L" class="arrow flex flex-col items-center" style="zoom: 0.5;">
                <div class="point"></div>
                <div class="line"></div>
                <div class="center"></div>
            </div>
            <div class="flex flex-col items-center" style="position: absolute;bottom: 20%;left: calc(50% - 25px);">
                <p id="pCDegree_L" class="text-white text-base text-center" style="min-width: 50px;">0°</p>
            </div>
        </div>
        <div class="flex-1" style="position: relative; ">
            <img class="imgEyeGT px-1 my-2 w-full object-contain" alt="app.image" src="/common/image/ic_eye.png"
            />
            <div id="divArrow_R" class="arrow flex flex-col items-center" style="zoom: 0.5;">
                <div class="point"></div>
                <div class="line"></div>
                <div class="center"></div>
            </div>
            <div class="flex flex-col items-center" style="position: absolute;bottom: 20%;left: calc(50% - 25px);">
                <p id="pCDegree_R" class="text-white text-base text-center" style="min-width: 50px;">0°</p>
            </div>
        </div>
    </div>
    <!-- 提示內容 -->
    <p class="text-base text-white py-2">
        測試流程<br>
        1.當您覺得圖形 模糊 時按一下按鈕<br>
        2.當您覺得圖形 破裂 時按一下按鈕<br>
        3.當您覺得圖形 恢復 時按一下按鈕<br>
        總計最多按3次
    </p>
    <!-- 注視區域 -->
    <div class="flex flex-col w-full items-center justify-center bg-white" style="min-height: 45mm;">
        <img id="imgOptotype" class="imgArea" src="/app/image/GatherTest/ic_vision_e.png" alt="area">
    </div>
    <!-- 按我記錄 -->
    <div class="flex flex-col items-center justify-center w-full">
        <button id="btRecord"
                class="divRecord w-2/3 my-4 text-2xl text-white tracking-widest rounded-lg focus:outline-none">
            按我記錄
        </button>
    </div>
    <!-- 模式進度、取消 -->
    <div id="divRun" class="flex flex-col w-full items-center" style="display: none;">
        <!-- 紀錄數值 -->
        <div class="flex flex-row items-center justify-center w-full text-white">
            <div class="flex flex-row items-center w-full my-2">
                <div class="flex flex-col flex-1 items-center">
                    <p class="text-base py-1">模糊點</p>
                    <p class="text-lg text-gray-200 py-1" id="pBlur">0</p>
                </div>
                <div class="flex flex-col flex-1 items-center">
                    <p class="text-base py-1">破裂點</p>
                    <p class="text-lg text-gray-200 py-1" id="pBreak">0</p>
                </div>
                <div class="flex flex-col flex-1 items-center">
                    <p class="text-base py-1">恢復點</p>
                    <p class="text-lg text-gray-200 py-1" id="pRecover">0</p>
                </div>
            </div>
        </div>
        <!-- 分割線 -->
        <div class="w-full bg-gray-500" style="min-height: 1px;"></div>
        <!-- 模式資訊 -->
        <p id="pCMode" class="my-2 text-white text-2xl tracking-widest"></p>
        <p id="pCType" class="my-1 text-gray-300 text-lg tracking-widest hidden"></p>
        <div class="flex flex-row px-2 my-2 items-center w-full">
            <p class="px-2 min-w-max text-white text-xl tracking-widest">執行進度</p>
            <div class="mx-2 flex-grow bg-gray-700 rounded-lg h-6" style="max-width: 300px;">
                <div id="divProgress"
                     class="flex flex-row w-full items-center justify-center bg-blue-600 h-6 rounded-lg text-white text-sm text-center"
                     style="width: 45%;transition-duration: 200ms;">45%
                </div>
            </div>
        </div>
        <div class="flex flex-row items-center justify-center w-full my-2 text-white text-lg tracking-widest">
            <p class="mx-2">剩餘時間:</p>
            <p id="pRemainTime"></p>
        </div>
        <button class="px-8 py-1 my-2 text-xl text-white bg-red-600 rounded-lg" onclick="StopTrain()">立即停止</button>
    </div>
</div>
</body>
</html>
